# Утилита для сортировки строк

## Описание

Утилита `sort_strings` предназначена для сортировки строк из текстового файла различными алгоритмами.

Программа принимает на вход:

1. Количество строк, которые необходимо отсортировать.
2. Имя файла, из которого считываются строки.
3. Имя алгоритма сортировки.
4. Имя компаратора.

После сортировки строки выводятся в стандартный поток вывода.

---

## Поддерживаемые алгоритмы сортировки

| Алгоритм    | Описание               |
|-------------|------------------------|
| `bubble`    | Пузырьковая сортировка |
| `insertion` | Сортировка вставками   |
| `merge`     | Сортировка слиянием    |
| `quick`     | Быстрая сортировка     |
| `radix`     | Поразрядная сортировка |

---

## Поддерживаемые компараторы

| Компаратор | Описание                              |
|------------|---------------------------------------|
| `asc`      | Сортировка по возрастанию (от A до Z) |
| `des`      | Сортировка по убыванию (от Z до A)    |

---

## Способы чтения файла

Метод чтения файла выбирается **на этапе компиляции** через `CMake`:

- **Обычное чтение (`fopen`)** — стандартное чтение построчно.
- **Чтение через `mmap`** — маппинг файла в память (можно включить через `-DUSE_MMAP=ON` при сборке).

---

## Инструкция по сборке

1. Склонируйте репозиторий:
   ```sh
   git clone https://github.com/your-repo/sort_strings.git
   cd sort_strings
2. Создайте папку сборки и выполните конфигурацию:

   ```sh
   mkdir build && cd build
   cmake .. 
   make
3. (Опционально) Сборка с mmap:
   ```sh
   cmake -DUSE_MMAP=ON ..
   make 
   ```
Для проверки можно использовать команды:
1) ```sh 
   strace ./sort_strings 3 input.txt bubble asc 2>&1 | grep -E 'open|read|mmap'
   
Для просмотра какие вызовы выполняются
2) ```sh
   grep USE_MMAP CMakeCache.txt 
Для проверки, что USE_MMAP не был включен при сборке

## Запуск
После сборки утилита sort_strings будет находиться в build/. Запустите её с нужными параметрами:

```sh 
Usage: ./sort_strings <num_lines> <file> <algorithm> <comparator>
```

Примеры использования:

1. Сортировка 3 строк из input.txt пузырьковой сортировкой по возрастанию:
   ```sh
   ./sort_strings 3 input.txt bubble asc

Вывод:

``` 
Hello
Hello World!
Hello!
```

2. Сортировка 3 строк из input.txt быстрой сортировкой по убыванию:
   ```sh
   ./sort_strings 3 input.txt quick des
   
```
Hello!
Hello World!
Hello
```

### Ошибки и обработка исключений
Программа возвращает код ошибки -1 и выводит сообщение в stderr, если:

- Передано недостаточно аргументов.
- Неверное количество строк.
- Указан неизвестный алгоритм сортировки.
- Указан неизвестный компаратор.
- Ошибка при открытии файла.
- Ошибка выделения памяти.

Пример ошибки:
   ```sh
   ./sort_strings 100500 input.txt unknown_algo unknown_cmp
   ```